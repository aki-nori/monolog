<div class="row my-3">
  <div class="col-lg-3"></div>
  <div class="col-lg-6">
    <div class="list-group">
      <div class="list-group-item list-group-item-action active">
        ガジェット編集
      </div>
      <div href="#" class="list-group-item">
        <%= form_with(model: @item, local: true) do |f| %>
          <%= render 'homes/error_messages', model: @item %>
          <form>
            <fieldset>
              <div class="form-group">
                <label for="">名称</label>
                <%= f.text_field :name, class: "form-control" %>
                <small class="form-text text-muted">入力条件</small>
              </div>
              <div class="form-group">
                <label for="">画像</label>
                <%= f.attachment_field :image, class: "form-control-file" %>
              </div>
              <div class="form-group">
                <label for="">カテゴリー</label>
                <%= f.select :category_id, Category.all.map { |category| [category.name, category.id] }, {}, :class => 'form-control' %>
              </div>
              <div class="form-group">
                <label for="">説明</label>
                <%= f.text_area :infomation, rows: 10, class: "form-control" %>
                <small class="form-text text-muted">入力条件</small>
              </div>
              <div class="form-group">
              <label for="">サイト</label>
              <%= f.text_field :external_page, class: "form-control" %>
              <small class="form-text text-muted">入力条件</small>
            </div>
              <div class="form-group">
                <label for="">購入価格</label>
                <%= f.text_field :price, class: "form-control" %>
                <small class="form-text text-muted">入力条件</small>
              </div>
              <div class="form-group">
                <label for="">購入場所</label>
                <%= f.text_field :place, class: "form-control" %>
                <small class="form-text text-muted">入力条件</small>
              </div>
              <div class="form-group">
                <label>評価</label>
                <!--星評価-->
                <div id="star-rate-<%= @item.id %>">編集前　</div>
                <div id='star-score'>編集後　</div>
                <!--/星評価-->
                <small class="form-text text-muted">入力条件</small>
                <%= f.hidden_field :score, id: :item_rating %>
              </div>
              <div class="form-group">
                <label for="">タグ</label>
                <small class="form-text text-muted">,区切り（スペースなし）</small>
                  <%= f.text_field :tag_list, value: @item.tag_list.join(',')  %>
              </div>
              <%= f.hidden_field :user_id, :value => current_user.id %>
              <%= f.submit "登録", :class => "btn btn-primary" %>
            </fieldset>
          </form>
        <% end %>
      </div>
    </div>
</div>
</div>

<script>
  $('#star-score').raty({
    path: '/assets/',
    click: function(score, e) {
      $("#item_rating").val(score)
    }
  });

  $('#star-rate-<%= @item.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    half: true,
    readOnly: true,
    score: <%= @item.score %>,
  });
</script>