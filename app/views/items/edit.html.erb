<div class="row my-3">
  <div class="col-lg-3"></div>
  <div class="col-lg-6">
    <div class="list-group">
      <div class="list-group-item list-group-item-action active">
        ガジェット編集
      </div>
      <div href="#" class="list-group-item">
        <%= form_with(model: @item, local: true) do |f| %>
          <%= render 'homes/error_messages', model: @item %>
          <form>
            <fieldset>
              <div class="form-group">
                <label for="">名称</label>
                <%= f.text_field :name, class: "form-control" %>
                <small class="form-text text-muted">入力必須 30字以内<</small>
              </div>
              <div class="form-group">
                <label for="">画像</label>
                <%= f.attachment_field :image, class: "form-control-file" %>
              </div>
              <div class="form-group">
                <label for="">カテゴリー</label>
                <%= f.select :category_id, Category.all.map { |category| [category.name, category.id] }, {}, :class => 'form-control' %>
              </div>
              <div class="form-group">
                <label for="">メーカー</label>
                <%= f.text_field :maker, class: "form-control", placeholder: "" %>
                <small class="form-text text-muted">10字以内</small>
              </div>
              <div class="form-group">
                <label for="">説明</label>
                <%= f.text_area :infomation, rows: 10, class: "form-control" %>
                <small class="form-text text-muted">入力必須 500字以内</small>
              </div>
              <div class="form-group">
              <label for="">サイト</label>
              <%= f.text_field :external_page, class: "form-control" %>
              </div>
              <div class="form-group">
                <label for="">購入価格</label>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">¥</span>
                  </div>
                  <%= f.text_field :price, class: "form-control" %>
                </div>
              </div>
              <div class="form-group">
                <label for="">購入場所</label>
                <%= f.text_field :place, class: "form-control" %>
              </div>
              <div class="form-group">
                <label>評価</label>
                <!--星評価-->
                <div id="star-rate-<%= @item.id %>">編集前　</div>
                <div id='star-score'>編集後　</div>
                <!--/星評価-->
                <%= f.hidden_field :score, id: :item_rating %>
              </div>
              <%= f.hidden_field :user_id, :value => current_user.id %>
              <div class="mx-auto">
                <%= f.submit "更新", :class => "btn btn-primary" %>
                <%= link_to "削除",@item, method: :delete, data: {confirm: "本当に削除してもよろしいですか？"}, :class => "btn btn-outline-primary"%>
              </div>
            </fieldset>
          </form>
        <% end %>

      </div>
    </div>
</div>
</div>

<script>
  $('#star-score').raty({
    path: '/assets/',
    click: function(score, e) {
      $("#item_rating").val(score)
    }
  });

  $('#star-rate-<%= @item.id %>').raty({
    size: 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    half: true,
    readOnly: true,
    score: <%= @item.score %>,
  });
</script>